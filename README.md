# Техническое задание: "MY TODO"

## 1. Название проекта
**"MY TODO"** - Мобильное приложение для отслеживания текущих задач с элементами геймификации

## 2. Цель проекта
Разработать мобильное приложение, в котором можно записывать текущие задачи с приоритетами, за выполнение которых начисляются баллы с определенным коэффициентом.


## 3. Сроки выполнения
- **Начало:** 10.02.2026
- **Окончание:** 14.05.2026
- **Длительность:** 13 недель

## 4. Команда проекта

| Роль | Участники                                        |
|------|--------------------------------------------------|
| **Бэкенд-разработчики** | Колесников Никита 504535, Газизова Карина 505010 |
| **Фронтенд-разработчики** | Курбанова Зарина 505337, Сидорович Юлия, 503279  |

## 5. Функциональные требования

### 5.1 Основной функционал
- Добавление/удаление задач
- Прикрепление файлов и изображений к задаче
- Установка дедлайнов
- Назначение степени важности (приоритета)
- Досрочное завершение задачи
- Автоматический архив выполненных задач

### 5.2 Геймификация
- **За выполнение вовремя:** `k * n` баллов
- **За досрочное выполнение:** `k * m` баллов
- **За просроченную актуальную задачу:** штрафные баллы

### 5.3 Пользовательская система
- Создание аккаунта (без пароля и безопасности)
- Хранение задач в базе данных
- Личный кабинет пользователя

### 5.4 Дополнительные задачи
- [ ] Красивый интерфейс (UI/UX)
- [ ] Интеграция с календарем
- [ ] Веб-версия приложения
- [ ] Публикация в цифровых магазинах

## 6. Технические требования

### 6.1 Общие требования

| Требование | Технологии | Потребители |
|------------|------------|-------------|
| REST API для связи фронтенда и бэкенда | ASP.NET Core Web API / PostgreSQL | Внутренние сервисы, фронтенд |
| Аутентификация пользователя | C# / PostgreSQL | Все пользователи |
| Сохранение задач в архив | C# / PostgreSQL | Авторизованные пользователи |
| Система начисления баллов | C# / PostgreSQL | Авторизованные пользователи |
| Горизонтальное масштабирование | C# / Docker | Все пользователи |
| Прикрепление файлов | C# / PostgreSQL | Авторизованные пользователи |
| Кроссплатформенность | React / PostgreSQL (REST API) | iOS и Android пользователи |

### 6.2 Выбор технологий

#### Бэкенд (C# ASP.NET Core)
- Производительность (близка к C++)
- Строгая типизация (меньше ошибок в production)
- Мощный фреймворк ASP.NET Core
- Entity Framework (ORM)


#### Бэкенд стек
| Компонент | Технология | Назначение |
|-----------|------------|------------|
| Платформа | .NET 8 (LTS) | Базовая платформа |
| Фреймворк | ASP.NET Core Web API | REST API |
| ORM | Entity Framework Core | Работа с БД |
| База данных | PostgreSQL | Хранение данных |
| Документация | Swagger/OpenAPI | Автодокументация API |
| Аутентификация | JWT | Токены доступа |
| Логирование | Serilog | Логирование событий |
| Валидация | FluentValidation | Валидация данных |
| Маппинг | AutoMapper | Преобразование объектов |

#### Фронтенд стек
- **JavaScript**
- **React**


### 7.1 Структура проекта
```csh
TodoApp/
├── backend/                # ASP.NET Core проект
│   ├── Controllers/        # API эндпоинты
│   ├── Models/             # Entity модели
│   ├── DTOs/               # Data Transfer Objects
│   ├── Services/           # Бизнес-логика
│   ├── Repositories/       # Работа с БД
│   ├── Data/               # DbContext и миграции
│   ├── Middleware/         # Кастомный middleware
│   ├── Extensions/         # Методы расширения
│   └── Program.cs          # Точка входа
│
├── frontend/               # React проект
│   ├── src/
│   │   ├── components/     # Переиспользуемые компоненты
│   │   ├── pages/          # Страницы
│   │   ├── services/       # API вызовы
│   │   ├── store/          # Redux/Zustand store
│   │   ├── types/          # TypeScript типы
│   │   ├── utils/          # Хелперы
│   │   └── App.tsx
│   └── public/
│
└── docker-compose.yml      # Для локальной разработки
```


## 8. Модели данных

### 8.1 Модель задачи (Task)
```csharp
public class Task
{
    public Guid Id { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
    public Priority Priority { get; set; } // Low, Medium, High, Critical
    public DateTime Deadline { get; set; }
    public DateTime CreatedAt { get; set; }
    public DateTime? CompletedAt { get; set; }
    public bool IsCompleted { get; set; }
    public bool IsArchived { get; set; }
    public Guid UserId { get; set; }
    public User User { get; set; }
    public ICollection<TaskAttachment> Attachments { get; set; }
}
```

### 8.2 Модели геймификации
```csharp
public class UserProfile
{
    public string Name { get; set; }
    public int Points { get; set; }
}

public class PointsHistory
{
    public Guid Id { get; set; }
    public Guid UserId { get; set; }
    public int Points { get; set; }
    public string Reason { get; set; } // on_time, early, late_penalty, etc.
    public DateTime CreatedAt { get; set; }
    public Guid? TaskId { get; set; }
}
```

## 9. API Эндпоинты

| Метод | Эндпоинт | Описание |
|-------|----------|----------|
| GET | `/api/tasks` | Получить активные задачи |
| GET | `/api/tasks/archive` | Получить архив |
| GET | `/api/tasks/{id}` | Получить задачу по ID |
| POST | `/api/tasks` | Создать задачу |
| PUT | `/api/tasks/{id}` | Обновить задачу |
| DELETE | `/api/tasks/{id}` | Удалить задачу |
| POST | `/api/tasks/{id}/complete` | Отметить как выполненную |

## 10. Алгоритм расчета баллов

```csharp
public int CalculatePoints(Task task, DateTime completedAt)
{
    int basePoints = task.Priority switch
    {
        Priority.Low => 10,
        Priority.Medium => 25,
        Priority.High => 50,
        Priority.Critical => 100,
        _ => 10
    };
    
    bool isEarly = completedAt < task.Deadline.AddDays(-1);
    bool isLate = completedAt > task.Deadline;
    
    if (isEarly) 
        return (int)(basePoints * 1.5);      // Бонус за досрочное
    if (isLate) 
        return (int)(basePoints * -0.5);      // Штраф за опоздание
    
    return basePoints;                          // Вовремя
}
```

## 11. План разработки по этапам

### Этап 0: Обучение (1-2 недели)
- Изучение технологий

### Этап 1: Настройка и базовая структура (2 недели)

#### Неделя 1: Инициализация проектов
**Бэкенд:**
- Создание ASP.NET Core Web API проекта
- Настройка архитектуры (Controllers, Services, Repositories)
- Подключение Entity Framework Core
- Настройка подключения к PostgreSQL
- Создание моделей User и Task
- Настройка Swagger

**Фронтенд:**
- Инициализация React проекта
- Настройка структуры папок

#### Неделя 2: Базовая аутентификация
**Бэкенд:**
- Настройка JWT аутентификации
- Сохранение токена (localStorage)
- Эндпоинты: регистрация, вход, профиль
- Middleware для обработки ошибок

**Фронтенд:**
- Компонент Header
- Страницы регистрации и входа

### Этап 2: Основные функции задач (3 недели)

#### Неделя 3: CRUD для задач (бэкенд)
- Реализация модели Task
- Создание эндпоинтов

#### Неделя 4: CRUD для задач (фронтенд)
- Страница со списком задач
- Фильтрация и сортировка
- Форма создания/редактирования
- Интеграция с API

#### Неделя 5: Файлы и вложения
**Бэкенд:**
- Настройка хранения файлов
- Модель Attachment
- Эндпоинты для загрузки/удаления

**Фронтенд:**
- Страница профиля
- Модальное окно добавления задачи

### Этап 3: Геймификация (3 недели)

#### Неделя 6: Система баллов и уровней (бэкенд)
- Модели геймификации
- Логика расчета баллов

#### Неделя 7: Интерфейс геймификации (фронтенд)
- Отображение баллов
- История начислений

#### Неделя 8: Архив и статистика
- Автоматический архив
- Статистика выполнения

#### Неделя 9: Интеграция (бэкенд + фронтенд)
- Сборка главной страницы
- Модальное окно для файлов

### Этап 4: Финальные улучшения и тестирование (2 недели)

#### Неделя 10: Тестирование
- Unit-тесты (xUnit/NUnit)
- Интеграционные тесты
- Тестирование фронтенда (Jest, React Testing Library)

#### Неделя 11: Деплой
- Настройка Docker
- Деплой на сервер

## 12. Ожидаемые результаты

1. Готовое кроссплатформенное мобильное приложение (MVP)
2. Документированная архитектура backend и frontend
3. Проведенное тестирование (ручное и автоматизированное)
4. Документация по использованию и технической реализации
5. Прототипы UX/UI в Figma

## 13. Критерии успеха

- [ ] Приложение работает на iOS и Android
- [ ] Все задачи можно создавать, редактировать и удалять
- [ ] Система баллов функционирует корректно
- [ ] Архив задач работает корректно
- [ ] Интерфейс интуитивно понятен
- [ ] Приложение выдерживает нагрузку некоторого числа пользователей